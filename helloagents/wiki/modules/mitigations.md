# Mitigations

## 目的
管理减伤定义库与运行时减伤状态，用于归因“命中瞬间生效的减伤”与推算“可用未交”责任。

## 模块概述
- **职责:** 维护减伤定义（持续/冷却/职业等），跟踪激活状态，生成缺失减伤/覆盖（顶掉）记录，供 UI 与分享使用。
- **状态:** ✅稳定
- **最后更新:** 2026-01-13

## 规范
- 减伤定义应集中在 `DefaultMitigationLibrary` 并可由配置覆盖（启用/阈值等）。
- 默认减伤库需覆盖常用治疗职业减伤（团队/单体），并保持持续/冷却数据与公开资料一致（Huiji/GarlandTools 等）。
- “缺失减伤（可用未交）”生成必须做学会等级过滤：队员未到学会等级（含等级同步不足）不应被追责。
- “缺失减伤”除“可用未交”外，还应标注“已放未覆盖”：检测到技能已在持续窗口内释放，但本次命中目标未吃到该减伤（例如：放歪/未进圈/未覆盖）。
- 冲突减伤（顶掉/覆盖）检测应保持可解释：包含旧/新施放者与剩余/持续时长信息。
- 自动通报应与状态生成解耦（状态只产出事件，发送交由通报队列/发送器处理）。
